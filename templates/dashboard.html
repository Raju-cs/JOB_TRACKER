{% extends "base.html" %}
{% block content %}
<div class="dashboard-container">

    <!-- Welcome Header -->
    <div class="dashboard-header mb-5">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h1 class="display-5 fw-bold text-primary mb-2">Welcome back, {{ user.username }}!</h1>
                <p class="lead text-muted">You are logged in as <span class="badge bg-primary">{{ user.role|capitalize }}</span></p>
            </div>
            <div class="col-md-4 text-md-end">
                <div class="quick-stats-card bg-white shadow-sm rounded-3 p-3 d-inline-block">
                    <div class="d-flex align-items-center">
                        <div class="quick-stat-icon bg-primary rounded-circle me-3">
                            <i class="fas fa-briefcase text-white"></i>
                        </div>
                        <div>
                            <h4 class="mb-0 fw-bold">
                                {% if mode == "recruiter" %}
                                    {{ jobs|length }}
                                {% else %}
                                    {{ applications|length }}
                                {% endif %}
                            </h4>
                            <small class="text-muted">
                                {% if mode == "recruiter" %}Active Jobs{% else %}Applications{% endif %}
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recruiter Dashboard -->
    {% if mode == "recruiter" %}
    <div class="row">
        <!-- Stats Overview -->
        <div class="col-lg-3 mb-4">
            <div class="stats-card card border-0 shadow-sm h-100">
                <div class="card-body">
                    <h6 class="card-title text-muted mb-3">JOB STATISTICS</h6>
                    <div class="stat-item d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <i class="fas fa-briefcase text-primary me-2"></i>
                            <span>Total Jobs</span>
                        </div>
                        <span class="fw-bold">{{ jobs|length }}</span>
                    </div>
                    <div class="stat-item d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <i class="fas fa-users text-success me-2"></i>
                            <span>Total Applications</span>
                        </div>
                        <span class="fw-bold">
                            {% set total_apps = [] %}
                            {% for job in jobs %}
                                {% if total_apps.append(job.applications|length) %}{% endif %}
                            {% endfor %}
                            {{ total_apps|sum }}
                        </span>
                    </div>
                  
                    <div class="stat-item d-flex justify-content-between align-items-center">
                        <div>
                            <i class="fas fa-eye text-info me-2"></i>
                            <span>Avg. per Job</span>
                        </div>
                        <span class="fw-bold">
                            {% if jobs|length > 0 %}
                                {{ (total_apps|sum / jobs|length)|round(1) }}
                            {% else %}
                                0
                            {% endif %}
                        </span>
                    </div>
                <!-- In your dashboard template -->
                <div class="mt-4 pt-3 border-top">
    <h6 class="card-title text-muted mb-3">INTERVIEW SESSIONS</h6>
    
    {% set upcoming_interviews = [] %}
    {% for job in jobs %}
        {% for interview in job.interviews %}
            {% if interview.is_upcoming %}
                {% if upcoming_interviews.append(interview) %}{% endif %}
            {% endif %}
        {% endfor %}
    {% endfor %}
    
   {% if upcoming_interviews %}
        {% for interview in upcoming_interviews|sort(attribute='date') %}
            {% if loop.index <= 3 %}
                <div class="interview-card">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <h6 class="mb-0">{{ interview.job.title }}</h6>
                        <span class="interview-badge">
                            {{ interview.date|relative_date }}
                        </span>
                    </div>
                    <p><i class="far fa-calendar me-2"></i>{{ interview.date.strftime("%B %d, %Y | %I:%M %p") }}</p>
                    <p><i class="fas fa-user me-2"></i>{{ interview.candidate.username }}</p>
                    <p><i class="fas fa-tag me-2"></i>
                        {% if interview.interview_type == 'phone_screen' %}Phone Screening
                        {% elif interview.interview_type == 'technical' %}Technical Interview
                        {% elif interview.interview_type == 'behavioral' %}Behavioral Interview
                        {% elif interview.interview_type == 'cultural_fit' %}Cultural Fit Interview
                        {% elif interview.interview_type == 'panel' %}Panel Interview
                        {% elif interview.interview_type == 'onsite' %}On-site Interview
                        {% elif interview.interview_type == 'video_call' %}Video Call
                        {% elif interview.interview_type == 'hr_screening' %}HR Screening
                        {% elif interview.interview_type == 'final_round' %}Final Round Interview
                        {% else %}{{ interview.interview_type|replace('_', ' ')|title }}
                        {% endif %}
                    </p>
                    <div class="d-flex justify-content-between align-items-center mt-2">
                        <small><i class="fas fa-map-marker-alt me-1"></i> 
                            {% if interview.location %}
                                {{ interview.location|truncate(30) }}
                            {% else %}
                                Location TBD
                            {% endif %}
                        </small>
                        <a href="{{ url_for('view_applications', job_id=interview.job.id) }}" class="text-white">
                            <i class="fas fa-external-link-alt"></i>
                        </a>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
        
        <div class="text-center mt-2">
            <a href="{{ url_for('interview_calendar') }}" class="btn btn-sm btn-outline-primary">View All Interviews</a>
        </div>
    {% else %}
        <div class="text-center py-3">
            <i class="fas fa-calendar-times fa-2x text-muted mb-2"></i>
            <p class="text-muted mb-0">No upcoming interviews</p>
        </div>
    {% endif %}
</div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-lg-9">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="fas fa-list me-2 text-primary"></i>Your Job Posts</h5>
                    <a href="{{ url_for('post_job') }}" class="btn btn-primary btn-sm">
                        <i class="fas fa-plus-circle me-1"></i> Post New Job
                    </a>
                </div>
                
                <!-- Search and Filter Section -->
                <div class="search-section bg-light border-bottom p-3">
                    <div class="row g-3">
                        <!-- Search by Job Title -->
                        <div class="col-md-4">
                            <div class="input-group input-group-sm">
                                <span class="input-group-text bg-white border-end-0">
                                    <i class="fas fa-search text-muted"></i>
                                </span>
                                <input type="text" class="form-control border-start-0" placeholder="Search by job title..." id="jobSearch">
                            </div>
                        </div>
                        
                        <!-- Filter by Status -->
                        <div class="col-md-3">
                            <select class="form-select form-select-sm" id="statusFilter">
                                <option value="">All Statuses</option>
                                <option value="active">Active</option>
                                <option value="closing">Closing Soon</option>
                                <option value="draft">Draft</option>
                                <option value="closed">Closed</option>
                            </select>
                        </div>
                        
                        <!-- Filter by Date Posted -->
                        <div class="col-md-3">
                            <select class="form-select form-select-sm" id="dateFilter">
                                <option value="">Any Date</option>
                                <option value="today">Today</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                                <option value="older">Older</option>
                            </select>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="col-md-2 d-flex">
                            <button class="btn btn-sm btn-outline-primary me-2" id="applyFilters">
                                <i class="fas fa-filter me-1"></i> Apply
                            </button>
                            <button class="btn btn-sm btn-outline-secondary" id="resetFilters">
                                <i class="fas fa-redo me-1"></i> Reset
                            </button>
                        </div>
                    </div>
                    
                    <!-- Advanced Filters Toggle -->
                    <div class="mt-2">
                        <a class="text-decoration-none small" data-bs-toggle="collapse" href="#advancedFilters" role="button">
                            <i class="fas fa-sliders-h me-1"></i> Advanced Filters
                        </a>
                    </div>
                    
                    <!-- Advanced Filters -->
                    <div class="collapse mt-3" id="advancedFilters">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <label class="form-label small mb-1">Applications Range</label>
                                <select class="form-select form-select-sm" id="applicationsFilter">
                                    <option value="">Any number</option>
                                    <option value="0">No applications</option>
                                    <option value="1-5">1-5 applications</option>
                                    <option value="6-10">6-10 applications</option>
                                    <option value="10+">10+ applications</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label small mb-1">Sort By</label>
                                <select class="form-select form-select-sm" id="sortBy">
                                    <option value="newest">Newest First</option>
                                    <option value="oldest">Oldest First</option>
                                    <option value="applications">Most Applications</option>
                                    <option value="title">Job Title (A-Z)</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label small mb-1">Job Type</label>
                                <select class="form-select form-select-sm" id="jobTypeFilter">
                                    <option value="">All Types</option>
                                    <option value="fulltime">Full-time</option>
                                    <option value="parttime">Part-time</option>
                                    <option value="contract">Contract</option>
                                    <option value="remote">Remote</option>
                                </select>
                            </div>
                            <div class="col-md-3 d-flex align-items-end">
                                <button class="btn btn-sm btn-primary w-100" id="applyAdvanced">
                                    <i class="fas fa-check me-1"></i> Apply Filters
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card-body p-0">
                    {% if jobs %}
                   <div class="table-responsive">
    <table class="table table-hover align-middle mb-0">
        <!-- Table Header -->
        <thead class="table-light">
            <tr>
                <th class="ps-4">Job Title</th>
                <th style="width: 120px;">Posted On</th>
                <th>Applications</th>
                <th>Status</th>
                <th class="text-end pe-4">Actions</th>
            </tr>
        </thead>

        <!-- Table Body -->
        <tbody id="jobsTableBody">
            {% for job in jobs %}
            <tr>
                <!-- Job Title + Company -->
                <td class="ps-4">
                    <div class="d-flex align-items-center">
                        <div class="job-icon bg-primary bg-opacity-10 text-primary rounded-circle d-flex justify-content-center align-items-center me-3" style="width:40px; height:40px;">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <div>
                            <h6 class="mb-0">{{ job.title }}</h6>
                            <small class="text-muted">{{ job.company }}</small>
                        </div>
                    </div>
                </td>

                <!-- Posted Date -->
                <td>
                    <small class="text-muted">{{ job.created_at.strftime("%b %d, %Y") }}</small>
                </td>

                <!-- Applications Count -->
                <td>
                    <span class="badge bg-primary rounded-pill">{{ job.applications|length }}</span>
                </td>

                <!-- Status -->
                <td>
                    {% if job.is_active %}
                        <span class="badge bg-success">Active</span>
                    {% else %}
                        <span class="badge bg-secondary">Inactive</span>
                    {% endif %}
                </td>

                <!-- Actions -->
                <td class="text-end pe-4">
                    <a href="{{ url_for('edit_job', job_id=job.id) }}" class="btn btn-outline-primary btn-sm me-1" style="font-size: 13px;margin-bottom: 3px;">
                        <i class="fa-solid fa-pen-to-square me-1"></i> Edit
                    </a>
                    <a href="{{ url_for('view_applications', job_id=job.id) }}" class="btn btn-outline-info btn-sm me-1" style="font-size: 13px;margin-bottom: 3px;">
                        <i class="fas fa-eye me-1"></i> View
                    </a>
                  <form action="{{ url_for('toggle_job', job_id=job.id) }}" method="post" style="display:inline;">
                    {% if job.is_active %}
                    <button type="submit" class="btn btn-outline-secondary btn-sm me-1" style="font-size: 13px;"
                        onclick="return confirm('Are you sure you want to mark this job as inactive?');">
                        <i class="fa-solid fa-ban me-1"></i> Inactive
                    </button>
                    {% else %}
                    <button type="submit" class="btn btn-outline-success btn-sm me-1" style="font-size: 13px;"
                        onclick="return confirm('Are you sure you want to mark this job as active?');">
                        <i class="fa-solid fa-check me-1"></i> Active
                    </button>
                    {% endif %}
                </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

                    {% else %}
                        <div class="text-center py-5">
                            <div class="empty-state-icon mb-3">
                                <i class="fas fa-briefcase fa-3x text-muted"></i>
                            </div>
                            <h5 class="text-muted">No jobs posted yet</h5>
                            <p class="text-muted">Get started by posting your first job opportunity</p>
                            <a href="{{ url_for('post_job') }}" class="btn btn-primary mt-2">
                                <i class="fas fa-plus-circle me-1"></i> Post a Job
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    {% endif %}

    <!-- Candidate Dashboard -->
    {% if mode == "candidate" %}
    <div class="row">
        <!-- Stats Overview -->
        <div class="col-lg-3 mb-4">
            <div class="stats-card card border-0 shadow-sm h-100">
                <div class="card-body">
                    <h6 class="card-title text-muted mb-3">APPLICATION STATUS</h6>
                    <div class="status-list">
                        {% set pending_count = applications|selectattr("status", "equalto", "pending")|list|length %}
                        {% set accepted_count = applications|selectattr("status", "equalto", "accepted")|list|length %}
                        {% set applied_count = applications|selectattr("status", "equalto", "Applied")|list|length %}
                        {% set rejected_count = applications|selectattr("status", "equalto", "rejected")|list|length %}
                        
                        <div class="status-item d-flex align-items-center mb-2">
                            <span class="status-indicator bg-warning me-2"></span>
                            <span class="flex-grow-1">Pending</span>
                            <span class="fw-bold">{{ pending_count }}</span>
                        </div>
                        <div class="status-item d-flex align-items-center mb-2">
                            <span class="status-indicator bg-success me-2"></span>
                            <span class="flex-grow-1">Accepted/Applied</span>
                            <span class="fw-bold">{{ accepted_count + applied_count }}</span>
                        </div>
                        <div class="status-item d-flex align-items-center">
                            <span class="status-indicator bg-danger me-2"></span>
                            <span class="flex-grow-1">Rejected</span>
                            <span class="fw-bold">{{ rejected_count }}</span>
                        </div>
                        <div class="mt-4 pt-3 border-top">
    <h6 class="card-title text-muted mb-3">YOUR INTERVIEW SESSIONS</h6>
    
    {% set candidate_interviews = [] %}
    {% for interview in current_user.interviews %}
        {% if interview.date > now() and interview.status == 'scheduled' %}
            {% if candidate_interviews.append(interview) %}{% endif %}
        {% endif %}
    {% endfor %}
    
    {% if candidate_interviews %}
        {% for interview in candidate_interviews|sort(attribute='date') %}
            {% if loop.index <= 3 %}  {# Show only next 3 interviews #}
                <div class="interview-card candidate_interview">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <h6 class="mb-0">{{ interview.job.title }}</h6>
                        <span class="interview-badge">
                            {{ interview.date|relative_date }}
                        </span>
                    </div>
                    <p><i class="far fa-calendar me-2"></i>{{ interview.date.strftime("%B %d, %Y | %I:%M %p") }}</p>
                    <p><i class="fas fa-building me-2"></i>{{ interview.job.company }}</p>
                    <p><i class="fas fa-tag me-2"></i>
                        {% if interview.interview_type == 'phone_screen' %}Phone Screening
                        {% elif interview.interview_type == 'technical' %}Technical Interview
                        {% elif interview.interview_type == 'behavioral' %}Behavioral Interview
                        {% elif interview.interview_type == 'cultural_fit' %}Cultural Fit Interview
                        {% elif interview.interview_type == 'panel' %}Panel Interview
                        {% elif interview.interview_type == 'onsite' %}On-site Interview
                        {% elif interview.interview_type == 'video_call' %}Video Call
                        {% elif interview.interview_type == 'hr_screening' %}HR Screening
                        {% elif interview.interview_type == 'final_round' %}Final Round Interview
                        {% else %}{{ interview.interview_type|replace('_', ' ')|title }}
                        {% endif %}
                    </p>
                    <div class="d-flex justify-content-between align-items-center mt-2">
                        <small><i class="fas fa-map-marker-alt me-1"></i> 
                            {% if interview.location %}
                                {% if 'http' in interview.location or 'meet' in interview.location or 'zoom' in interview.location %}
                                    <a href="{{ interview.location }}" target="_blank" class="text-white">Join Meeting</a>
                                {% else %}
                                    {{ interview.location|truncate(30) }}
                                {% endif %}
                            {% else %}
                                Location TBD
                            {% endif %}
                        </small>
                        <div>
                            {% if interview.interviewer_name %}
                                <small class="me-2"><i class="fas fa-user-tie me-1"></i>{{ interview.interviewer_name }}</small>
                            {% endif %}
                            <a href="{{ url_for('interview_calendar') }}" class="text-white" title="View Details">
                                <i class="fas fa-external-link-alt"></i>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Interview Actions for Candidate -->
                    <div class="mt-3 pt-2 border-top">
                        <div class="btn-group w-100" role="group">
                            {% if interview.notes %}
                            <button type="button" class="btn btn-sm btn-outline-light" data-bs-toggle="modal" data-bs-target="#notesModal{{ interview.id }}">
                                <i class="fas fa-sticky-note me-1"></i> Notes
                            </button>
                            {% endif %}
                            
                            <!-- Add to Calendar Button -->
                            <a href="#" class="btn btn-sm btn-outline-light add-to-calendar" 
                               data-title="{{ interview.job.title }} Interview - {{ interview.job.company }}"
                               data-date="{{ interview.date.isoformat() }}"
                               data-duration="{{ interview.duration }}"
                               data-location="{{ interview.location }}"
                               data-description="Interview for {{ interview.job.title }} at {{ interview.job.company }}">
                                <i class="fas fa-calendar-plus me-1"></i> Add to Calendar
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Notes Modal -->
                {% if interview.notes %}
                <div class="modal fade" id="notesModal{{ interview.id }}" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Interview Notes</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <h6>{{ interview.job.title }} at {{ interview.job.company }}</h6>
                                <p class="text-muted">{{ interview.date.strftime("%B %d, %Y at %I:%M %p") }}</p>
                                <div class="bg-light p-3 rounded">
                                    {{ interview.notes|replace('\n', '<br>')|safe }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
            {% endif %}
        {% endfor %}
        
        <div class="text-center mt-2">
            <a href="{{ url_for('interview_calendar') }}" class="btn btn-sm btn-outline-primary">View All Interviews</a>
        </div>
    {% else %}
        <div class="text-center py-3">
            <i class="fas fa-calendar-times fa-2x text-muted mb-2"></i>
            <h6 class="text-muted">No upcoming interviews</h6>
            <p class="text-muted small">Your scheduled interviews will appear here</p>
        </div>
    {% endif %}
</div>

<style>
.interview-card.candidate_interview {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s ease;
}

.interview-card.candidate_interview:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.interview-card.candidate_interview h6 {
    font-weight: 600;
    margin-bottom: 10px;
    font-size: 0.95rem;
}

.interview-card.candidate_interview p {
    margin-bottom: 5px;
    font-size: 0.85rem;
    opacity: 0.9;
}

.interview-badge {
    background-color: rgba(255, 255, 255, 0.2);
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
}

.btn-outline-light {
    border-color: rgba(255, 255, 255, 0.5);
    color: white;
}

.btn-outline-light:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: white;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add to Calendar functionality
    const calendarButtons = document.querySelectorAll('.add-to-calendar');
    
    calendarButtons.forEach(button => {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            
            const title = this.getAttribute('data-title');
            const date = new Date(this.getAttribute('data-date'));
            const duration = parseInt(this.getAttribute('data-duration')) || 60;
            const location = this.getAttribute('data-location');
            const description = this.getAttribute('data-description');
            
            // Calculate end time
            const endDate = new Date(date.getTime() + duration * 60000);
            
            // Format dates for Google Calendar
            const formatDate = (d) => d.toISOString().replace(/-|:|\.\d+/g, '');
            
            const googleUrl = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(title)}&dates=${formatDate(date)}/${formatDate(endDate)}&details=${encodeURIComponent(description)}&location=${encodeURIComponent(location)}`;
            
            // Open Google Calendar in new tab
            window.open(googleUrl, '_blank');
        });
    });

    // Color code badges based on urgency
    const badges = document.querySelectorAll('.interview-badge');
    badges.forEach(badge => {
        const text = badge.textContent.trim().toLowerCase();
        
        if (text === 'today' || text === 'now' || text === 'soon') {
            badge.style.backgroundColor = '#dc3545';
        } else if (text === 'tomorrow') {
            badge.style.backgroundColor = '#fd7e14';
        } else if (text.includes('2 days') || text.includes('3 days')) {
            badge.style.backgroundColor = '#ffc107';
            badge.style.color = '#000';
        } else {
            badge.style.backgroundColor = '#28a745';
        }
    });
});
</script>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-lg-9">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-white py-3">
                    <h5 class="mb-0"><i class="fas fa-file-alt me-2 text-primary"></i>Your Applications</h5>
                </div>
                <div class="card-body p-0">
                    {% if applications %}
                        <div class="table-responsive">
                            <table class="table table-hover align-middle mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th class="ps-4">Job Position</th>
                                        <th>Company</th>
                                        <th style="width: 150px;">Applied On</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for app in applications %}
                                    <tr>
                                        <td class="ps-4">
                                            <h6 class="mb-0">{{ app.job.title }}</h6>
                                        </td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="company-icon bg-primary bg-opacity-10 text-primary rounded-circle me-2">
                                                    <i class="fas fa-building"></i>
                                                </div>
                                                <span>{{ app.job.company }}</span>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="text-muted">{{ app.applied_at.strftime("%b %d, %Y") }}</span>
                                        </td>
                                        <td>
                                            {% if app.status == "pending" %}
                                                <span class="badge bg-warning text-dark">
                                                    <i class="fas fa-clock me-1"></i> Pending
                                                </span>
                                            {% elif app.status == "accepted" or app.status == "Applied" %}
                                                <span class="badge bg-success">
                                                    <i class="fas fa-check me-1"></i> 
                                                    {% if app.status == "Applied" %}Applied{% else %}Accepted{% endif %}
                                                </span>
                                             {% elif app.status == "Interview" or app.status == "accepted" %}
                                                <span class="badge bg-success">
                                                    <i class="fa-brands fa-meetup"></i>
                                                    {% if app.status == "Interview" %}Interview{% else %}Accepted{% endif %}
                                                </span>
                                            {% else %}
                                                <span class="badge bg-danger">
                                                    <i class="fas fa-times me-1"></i> Rejected
                                                </span>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        <div class="card-footer bg-white border-0 py-3">
                            <a href="{{url_for('profile')}}" class="btn btn-primary">
                                <i class="fas fa-user-circle me-1"></i> My Resume
                            </a>
                            <a href="{{url_for('jobs')}}" class="btn btn-outline-primary ms-2">
                                <i class="fas fa-search me-1"></i> Browse Jobs
                            </a>
                        </div>
                    {% else %}
                        <div class="text-center py-5">
                            <div class="empty-state-icon mb-3">
                                <i class="fas fa-file-alt fa-3x text-muted"></i>
                            </div>
                            <h5 class="text-muted">No applications yet</h5>
                            <p class="text-muted">Start applying to jobs to track your progress here</p>
                            <a href="{{url_for('jobs')}}" class="btn btn-primary mt-2">
                                <i class="fas fa-search me-1"></i> Browse Jobs
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endif %}

</div>

{% endblock %}